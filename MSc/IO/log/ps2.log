
. *-----------------------------------------------------------------------------*
. 
. * Load data
. use Cars-1, clear

. 
. /* Description of the main variables in the dataset:
> 
> Data on all newly registered cars in five EU countries during a 30 year period, from 1970 to 1999. 
> 
> country1-5 are Belgium, France, Germany, Italy and the UK. 
> 
> co: car model in a given year and country. 
> 
> qu: number of new car registrations,
> 
> price: price of the car measured in 1000s of Euros in 1999 purchasing power,
>  
> horsepower: measured in kW, 
> 
> fuel: measured as fuel efficiency in liter per 100 km, 
> 
> width & height: in cm, 
> 
> brand: brand name of the model, 
> 
> domestic: dummy taking value 1 for domestically produced cars 
> 
> firm: name of the firm
> 
> pop: country population. 
> 
> segment: the car market is classified into five different segments: 
>         subcompact, compact, intermediate, standard, and luxury.
> */
. 
. * ---------------------------------------------------------------------------- *
. 
. * 1) Summary statistics 
. 
. estpost tabstat domestic qu price horsepower fuel width height weight, c(stat) stat(mean sd min max n)     

Summary statistics: mean sd min max count
     for variables: domestic qu price horsepower fuel width height weight

             |   e(mean)      e(sd)     e(min)     e(max)   e(count) 
-------------+-------------------------------------------------------
    domestic |  .1886267   .3912288          0          1      11483 
          qu |  19911.44    37803.6         51     433694      11483 
       price |  18.49683   8.922665   5.260726   150.3351      11483 
  horsepower |  57.26393   23.89019         13      169.5      11483 
        fuel |  6.728904   1.709702        3.8       18.6      11483 
       width |  164.4574   9.567716        122        188      11483 
      height |  140.4434   4.631175      117.5      173.5      11483 
      weight |   980.231   225.1497        520       1910      11483 

. 
. * Output for LaTeX
. 
. #delimit ; //#delimit, with a ; at the end, allows to not have to ue the slashes and can use them to comment like this instead.
delimiter now ;
. esttab using "output/SummaryStats.tex",
>  replace ///Replace file if already exists
>  cells("mean(fmt(3)) sd min max count(fmt(0))") ///Which Stats to Output
>  nonumber ///Do not put numbers below column titles
>  nomtitle ///This option mainly for regression tables
>  booktabs ///Top, Mid, Bottom Rule
>  noobs ///We don't need observation counts because count is N
>  title("Summary Statistics\label{tab1}") ///Latex number this for us
>  collabels("Mean" "SD" "Min" "Max" "N") /// Name of each column
>  addnote("Source: BjÃ¶rnerstedt and Verboven's Cars-1 dataset.") ///Note below table
>  coeflabels(year "Year" country "Country" qu "Number of new car regs" co "Car model" segment "Segment" domestic "1 if produced domestically" firm "Firm" brand "Brand" price "Price (in 1000 EUR)" horsepower "Horsepower (kW)" fuel "Fuel efficiency" width 
> "Width (cm)" height "Height (cm)" weight "Weight (kg)") ///Label variables right in command
> ;
(output written to output/SummaryStats.tex)

. #delimit cr;
delimiter now cr
. 
. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 2) Hedonic Price Equation
. egen yearcountry=group(year country)

. xtset co yearcountry

Panel variable: co (unbalanced)
 Time variable: yearcountry, 1 to 150, but with gaps
         Delta: 1 unit

. 
. * Generate the log of price
. gen logprice = log(price)

. 
. * Reg it on characteristics
. eststo clear

. eststo: reg logprice horsepower fuel width height weight i.segment i.country domestic

      Source |       SS           df       MS      Number of obs   =    11,483
-------------+----------------------------------   F(14, 11468)    =   5446.90
       Model |  1859.82809        14  132.844864   Prob > F        =    0.0000
    Residual |  279.693806    11,468  .024389066   R-squared       =    0.8693
-------------+----------------------------------   Adj R-squared   =    0.8691
       Total |   2139.5219    11,482   .18633704   Root MSE        =    .15617

-------------------------------------------------------------------------------
     logprice | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
--------------+----------------------------------------------------------------
   horsepower |   .0056975   .0001473    38.68   0.000     .0054088    .0059863
         fuel |   .0486584   .0010236    47.54   0.000     .0466521    .0506648
        width |   .0011557    .000346     3.34   0.001     .0004774    .0018339
       height |  -.0017204    .000332    -5.18   0.000    -.0023711   -.0010696
       weight |   .0001325   .0000212     6.23   0.000     .0000908    .0001741
              |
      segment |
     compact  |   .1554404   .0052215    29.77   0.000     .1452054    .1656755
intermediate  |   .2250345   .0062497    36.01   0.000      .212784    .2372849
    standard  |   .3855635    .008238    46.80   0.000     .3694157    .4017113
      luxury  |     .54865   .0104827    52.34   0.000     .5281021    .5691979
              |
      country |
      France  |   .0464216   .0045849    10.12   0.000     .0374344    .0554088
     Germany  |  -.0532062   .0045878   -11.60   0.000    -.0621991   -.0442132
       Italy  |   .1236038   .0047169    26.20   0.000     .1143578    .1328498
          UK  |   .3791909   .0045565    83.22   0.000     .3702594    .3881223
              |
     domestic |   .0193249    .003896     4.96   0.000     .0116881    .0269617
        _cons |   1.786672   .0637014    28.05   0.000     1.661806    1.911537
-------------------------------------------------------------------------------
(est1 stored)

. 
. * Output for LaTeX
. 
. #delimit ;
delimiter now ;
. esttab using "output/RegTable1.tex", 
>   se(3) /// SE with 3 Decimal Places
>   b(3) /// Coefficients with 3 Decimal Places
>   label
>   replace /// Replace File
>   title(Hedonic Price Regression \label{tab2}) /// Title of Tabel
>   mtitles() /// Column Titles
>   keep(horsepower fuel width height weight) /// Don't want all Control Coefficients
>   coeflabels(horsepower "Horsepower (kW)" fuel "Fuel efficiency" width "Width (cm)" height "Height (cm)" weight "Weight (kg)" country1 "Prod. in Belgium" country2 "Prod. in France" country3 "Prod. in Germany" country4 "Prod. in Italy" country5 "Prod. in
>  UK") /// Label Variables
> ;
(output written to output/RegTable1.tex)

. #delimit cr;
delimiter now cr
. 
. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 3) Logit 
. 
. *share (s_j)
. gen msize=pop/4

. gen mshare=qu/msize

. ge ln_mshare=log(mshare)

. sum mshare ln_mshare

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
      mshare |     11,483    .0016445    .0025973   .0000176   .0303018
   ln_mshare |     11,483   -7.378211    1.498763   -10.9473  -3.496549

. 
. *segment market share 
. egen tot_s=sum(qu), by(segment yearcountry)

. ge mshare_s=qu/tot_s

. ge ln_mshare_s=log(mshare_s)

. sum mshare_s ln_mshare_s

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    mshare_s |     11,483    .0653139    .0981379   .0002515          1
 ln_mshare_s |     11,483   -3.642759    1.466142  -8.288112          0

. 
. 
. * Outside option/good : 1 - sum(s_j) or 1 - (tot car regs/market size) 
. egen tot_qu=sum(qu), by(yearcountry)

. gen oshare=1-(tot_qu/msize) 

. 
. * Log of market share and the outside good share, i.e. log(s_j) & log(s_0)
. * Difference between them, log(s_j) - log(s_0). LHS in our OLS
. gen ln_dmshare=log(mshare)-log(oshare)

. 
. * OLS with the variables given in question. Country FEs are i.country where country1 (Belgium) is left out and Car model FEs are i.co. 
. eststo clear

. eststo: reg ln_dmshare price horsepower fuel width height domestic year i.country, r

Linear regression                               Number of obs     =     11,483
                                                F(11, 11471)      =     936.92
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4327
                                                Root MSE          =     1.1312

------------------------------------------------------------------------------
             |               Robust
  ln_dmshare | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       price |  -.0102057   .0030611    -3.33   0.001    -.0162058   -.0042055
  horsepower |  -.0356702   .0011586   -30.79   0.000    -.0379412   -.0333992
        fuel |  -.0624254   .0110543    -5.65   0.000    -.0840937   -.0407571
       width |   .0591566   .0018664    31.69   0.000     .0554981    .0628151
      height |  -.0008709   .0025005    -0.35   0.728    -.0057723    .0040305
    domestic |    1.83579   .0272568    67.35   0.000     1.782362    1.889218
        year |   .0025274   .0023722     1.07   0.287    -.0021224    .0071773
             |
     country |
     France  |  -.8351494   .0333449   -25.05   0.000     -.900511   -.7697877
    Germany  |  -.6793388   .0322118   -21.09   0.000    -.7424795   -.6161982
      Italy  |  -.7152225   .0373064   -19.17   0.000    -.7883494   -.6420956
         UK  |  -.7068834   .0403174   -17.53   0.000    -.7859123   -.6278545
             |
       _cons |  -18.99461   4.650707    -4.08   0.000    -28.11079   -9.878426
------------------------------------------------------------------------------
(est1 stored)

. *reghdfe ln_dmshare price horsepower fuel width height domestic, absorb(co yearcountry)
. *xtreg ln_dmshare price horsepower fuel width height domestic year i.country, fe
. 
. * Extract the alpha 
. gen alpha_OLS1=-_b[price]

. *own price elasticitiy - Logit
. gen e_jj_OLS=alpha_OLS1*(1-mshare)*price

. sum e_jj_OLS

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    e_jj_OLS |     11,483    .1885114    .0910817   .0535308   1.534227

. 
. 
. * Output for LaTeX
. #delimit ;
delimiter now ;
. esttab using "output/Logit.tex", 
>   se(3) /// SE with 3 Decimal Places
>   b(3) /// Coefficients with 3 Decimal Places
>   label
>   replace /// Replace File
>   title(Logit \label{tab3}) /// Title of Tabel
>   mtitles() /// Column Titles
>   keep(price horsepower fuel width height domestic year _cons) /// Don't want all Control Coefficients
>   coeflabels(price "Price (in 1000 EUR)" horsepower "Horsepower (kW)" fuel "Fuel efficiency" width "Width (cm)" height "Height (cm)" domestic "1 if produced domestically" year "Year") /// Label Variables
> ;
(output written to output/Logit.tex)

. #delimit cr;
delimiter now cr
. 
. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 4) Nested Logit
. 
. * OLS with the segment market shares included
. eststo clear

. eststo: reg ln_dmshare price ln_mshare_s horsepower fuel width height domestic year i.country i.co

      Source |       SS           df       MS      Number of obs   =    11,483
-------------+----------------------------------   F(362, 11120)   =    441.42
       Model |  24191.6186       362  66.8276757   Prob > F        =    0.0000
    Residual |  1683.47441    11,120  .151391584   R-squared       =    0.9349
-------------+----------------------------------   Adj R-squared   =    0.9328
       Total |   25875.093    11,482  2.25353536   Root MSE        =    .38909

------------------------------------------------------------------------------
  ln_dmshare | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       price |  -.0491036   .0013895   -35.34   0.000    -.0518273   -.0463799
 ln_mshare_s |   .8677908    .004327   200.55   0.000     .8593091    .8762725
  horsepower |   .0031765   .0006332     5.02   0.000     .0019354    .0044176
        fuel |  -.0255906   .0048552    -5.27   0.000    -.0351077   -.0160735
       width |   .0112444   .0017935     6.27   0.000     .0077288      .01476
      height |   .0012653   .0023704     0.53   0.593    -.0033811    .0059118
    domestic |   .3883771   .0127901    30.37   0.000     .3633063    .4134479
        year |  -.0025221    .001281    -1.97   0.049    -.0050331   -.0000111
             |
     country |
     France  |  -.3304413   .0120622   -27.39   0.000    -.3540853   -.3067973
    Germany  |  -.2093509   .0120898   -17.32   0.000     -.233049   -.1856529
      Italy  |  -.4288399   .0126037   -34.02   0.000    -.4535454   -.4041344
         UK  |   -.104273   .0158302    -6.59   0.000    -.1353031    -.073243
             |
          co |
          2  |  -.1530229   .0857712    -1.78   0.074    -.3211497     .015104
          3  |  -1.354518   .0856616   -15.81   0.000     -1.52243   -1.186606
          6  |  -1.065104   .1425191    -7.47   0.000    -1.344467   -.7857413
          7  |  -.8774033   .0726655   -12.07   0.000    -1.019841   -.7349661
          8  |  -.3583628   .0887206    -4.04   0.000    -.5322708   -.1844548
          9  |  -.1743432   .0742222    -2.35   0.019    -.3198318   -.0288546
         10  |  -.3895777   .1819236    -2.14   0.032    -.7461803   -.0329751
         11  |  -1.580812   .1464318   -10.80   0.000    -1.867844   -1.293779
         12  |  -1.493637   .0932561   -16.02   0.000    -1.676435   -1.310838
         13  |  -.1652268   .0658886    -2.51   0.012    -.2943802   -.0360734
         15  |  -.7862592   .0737217   -10.67   0.000    -.9307669   -.6417515
         18  |  -.7485516   .0650858   -11.50   0.000    -.8761314   -.6209718
         21  |  -1.338392    .070565   -18.97   0.000    -1.476711   -1.200072
         26  |  -.1472345   .0967258    -1.52   0.128    -.3368343    .0423653
         27  |   .0887068   .0773222     1.15   0.251    -.0628584     .240272
         28  |  -.2108477   .0751774    -2.80   0.005    -.3582088   -.0634867
         29  |  -1.157162   .0833148   -13.89   0.000    -1.320474     -.99385
         30  |  -.7637974    .075423   -10.13   0.000    -.9116399    -.615955
         32  |   -.043257    .082217    -0.53   0.599    -.2044169    .1179028
         34  |  -.1769033   .0868615    -2.04   0.042    -.3471672   -.0066394
         35  |  -.4882656   .0745219    -6.55   0.000    -.6343417   -.3421895
         36  |   -.091757   .0912455    -1.01   0.315    -.2706143    .0871003
         37  |  -.4376731   .1088216    -4.02   0.000    -.6509827   -.2243635
         38  |  -.3528243   .0870671    -4.05   0.000    -.5234911   -.1821574
         39  |     -.3015   .0868771    -3.47   0.001    -.4717945   -.1312055
         40  |  -.4165956    .093138    -4.47   0.000    -.5991627   -.2340286
         41  |  -.4689077   .0796711    -5.89   0.000    -.6250772   -.3127381
         42  |  -.5274879   .1137133    -4.64   0.000     -.750386   -.3045897
         43  |  -.2272755    .124818    -1.82   0.069    -.4719409      .01739
         50  |  -.1024441    .078405    -1.31   0.191    -.2561318    .0512437
         51  |   .0088978   .0760093     0.12   0.907    -.1400939    .1578895
         52  |   .1159786   .0773956     1.50   0.134    -.0357304    .2676876
         53  |  -.0781886   .0872301    -0.90   0.370    -.2491751    .0927978
         54  |  -.3829945   .0927581    -4.13   0.000    -.5648168   -.2011721
         55  |  -.3955559   .0877807    -4.51   0.000    -.5676216   -.2234902
         56  |  -1.256358     .08309   -15.12   0.000     -1.41923   -1.093487
         59  |  -.1526448   .2323731    -0.66   0.511    -.6081373    .3028476
         60  |   -.027207   .0845838    -0.32   0.748    -.1930063    .1385923
         61  |   .0521531   .0733226     0.71   0.477    -.0915722    .1958784
         62  |  -.4874371   .0760244    -6.41   0.000    -.6364585   -.3384157
         63  |   -.071086   .0793509    -0.90   0.370    -.2266279    .0844559
         64  |   .0712129   .0770513     0.92   0.355    -.0798213     .222247
         66  |   .4352133    .393951     1.10   0.269    -.3370006    1.207427
         68  |  -.0258357    .101267    -0.26   0.799    -.2243369    .1726655
         69  |   .0974433   .0927764     1.05   0.294     -.084415    .2793016
         70  |   .0676448   .0653862     1.03   0.301    -.0605238    .1958134
         71  |  -.0717248   .0637632    -1.12   0.261    -.1967121    .0532624
         72  |   .0081919   .0775242     0.11   0.916    -.1437693    .1601532
         73  |  -.1814091   .0770212    -2.36   0.019    -.3323844   -.0304339
         74  |  -1.106891   .0773572   -14.31   0.000    -1.258525   -.9552573
         76  |  -.8708109   .0859103   -10.14   0.000     -1.03921   -.7024114
         77  |  -.6478857   .0779948    -8.31   0.000    -.8007694   -.4950019
         78  |  -.2385353   .0904067    -2.64   0.008    -.4157484   -.0613222
         80  |  -.0595598   .0635166    -0.94   0.348    -.1840636    .0649439
         82  |  -.2742199   .0980405    -2.80   0.005    -.4663966   -.0820431
         83  |  -.9853494   .0664412   -14.83   0.000    -1.115586   -.8551129
         85  |  -.5797681   .1045476    -5.55   0.000       -.7847   -.3748362
         86  |  -.1740521   .1563119    -1.11   0.266    -.4804511    .1323469
         87  |   -.539989   .1515049    -3.56   0.000    -.8369655   -.2430125
         88  |  -.3999096   .1239606    -3.23   0.001    -.6428944   -.1569247
         90  |  -.2436231   .0736873    -3.31   0.001    -.3880632    -.099183
         91  |  -.6055474   .0857719    -7.06   0.000    -.7736755   -.4374192
         93  |  -.5715979   .1307308    -4.37   0.000    -.8278534   -.3153423
         94  |  -.5466376   .0807586    -6.77   0.000    -.7049389   -.3883364
         95  |   .2256852   .1705602     1.32   0.186     -.108643    .5600135
         96  |   .1872825   .3937696     0.48   0.634    -.5845757    .9591407
         97  |   .0988669   .1426167     0.69   0.488     -.180687    .3784209
         98  |   .0838031   .2036386     0.41   0.681    -.3153646    .4829708
         99  |   .0481136   .2024955     0.24   0.812    -.3488135    .4450408
        100  |   .1001698   .0940742     1.06   0.287    -.0842324     .284572
        101  |   .0961102   .1705841     0.56   0.573    -.2382649    .4304854
        104  |  -.4094143   .1081811    -3.78   0.000    -.6214684   -.1973603
        113  |  -.0464025   .0775439    -0.60   0.550    -.1984022    .1055973
        114  |  -.1375104   .0683441    -2.01   0.044    -.2714769   -.0035439
        115  |   -.398855   .0834336    -4.78   0.000    -.5623996   -.2353104
        116  |  -1.316917   .0850792   -15.48   0.000    -1.483688   -1.150147
        117  |  -.3673871   .0941855    -3.90   0.000    -.5520074   -.1827668
        118  |   .0827618   .0764802     1.08   0.279     -.067153    .2326766
        119  |  -.5384852   .0794232    -6.78   0.000    -.6941687   -.3828016
        120  |  -1.915826   .1155222   -16.58   0.000     -2.14227   -1.689382
        121  |  -.2469979   .0801342    -3.08   0.002    -.4040752   -.0899207
        122  |  -.0563946   .0666988    -0.85   0.398     -.187136    .0743468
        123  |  -.2860195   .0674686    -4.24   0.000    -.4182699   -.1537691
        124  |  -.8761484   .0779676   -11.24   0.000    -1.028979    -.723318
        132  |  -.1299713   .0953373    -1.36   0.173    -.3168492    .0569066
        133  |  -1.027073   .0795633   -12.91   0.000    -1.183031   -.8711143
        134  |  -1.291554   .0783808   -16.48   0.000    -1.445194   -1.137914
        136  |   -1.14199   .0889079   -12.84   0.000    -1.316266    -.967715
        137  |  -.8623862   .0930938    -9.26   0.000    -1.044866   -.6799059
        138  |  -.1152263   .0673931    -1.71   0.087    -.2473286     .016876
        139  |    -.40398   .0710876    -5.68   0.000    -.5433242   -.2646358
        140  |  -.7271725   .0978615    -7.43   0.000    -.9189983   -.5353467
        141  |    -.23737   .0715835    -3.32   0.001    -.3776863   -.0970538
        144  |  -.4810788   .1290126    -3.73   0.000    -.7339665   -.2281912
        146  |   -.138316   .1340934    -1.03   0.302    -.4011629    .1245309
        147  |   -.747413   .1629803    -4.59   0.000    -1.066883   -.4279427
        149  |    .011061   .0725168     0.15   0.879    -.1310848    .1532068
        150  |  -.0081441   .0676992    -0.12   0.904    -.1408466    .1245584
        153  |   -.255965   .0737487    -3.47   0.001    -.4005255   -.1114046
        154  |  -.2134429   .0801299    -2.66   0.008    -.3705117    -.056374
        155  |  -1.297169   .0908769   -14.27   0.000    -1.475304   -1.119034
        156  |  -.7196147   .0875947    -8.22   0.000    -.8913158   -.5479136
        158  |  -.1297512   .0753804    -1.72   0.085    -.2775101    .0180078
        159  |  -.4912142   .1243626    -3.95   0.000     -.734987   -.2474414
        160  |  -.4448912   .1086547    -4.09   0.000    -.6578738   -.2319086
        161  |  -.4834628   .0952452    -5.08   0.000    -.6701603   -.2967652
        164  |   .1068185   .0710398     1.50   0.133    -.0324321     .246069
        165  |  -.1376333    .066743    -2.06   0.039    -.2684615   -.0068051
        166  |  -.1602968   .0737663    -2.17   0.030    -.3048918   -.0157019
        168  |  -1.155015   .0776051   -14.88   0.000    -1.307135   -1.002895
        169  |  -1.364983   .0864743   -15.78   0.000    -1.534488   -1.195478
        170  |  -.5276378   .0710904    -7.42   0.000    -.6669876    -.388288
        172  |  -.9271854   .0772462   -12.00   0.000    -1.078602   -.7757692
        173  |  -1.377447   .1100698   -12.51   0.000    -1.593203    -1.16169
        174  |  -.8124877   .0901133    -9.02   0.000    -.9891257   -.6358497
        175  |  -.2987942   .1062979    -2.81   0.005    -.5071568   -.0904315
        177  |   .0004742   .0836919     0.01   0.995    -.1635769    .1645252
        178  |    .136178   .0733131     1.86   0.063    -.0075286    .2798846
        179  |   .0452201   .0831674     0.54   0.587    -.1178028    .2082431
        180  |  -.1585186   .0793027    -2.00   0.046    -.3139661   -.0030712
        181  |  -.9167137   .0833369   -11.00   0.000    -1.080069   -.7533586
        182  |  -1.220466   .0867141   -14.07   0.000    -1.390441   -1.050491
        183  |   .0525148   .0775398     0.68   0.498    -.0994769    .2045066
        184  |  -.0182505    .075537    -0.24   0.809    -.1663164    .1298155
        185  |  -.3713676   .0955286    -3.89   0.000    -.5586206   -.1841146
        186  |  -.6977447   .0822801    -8.48   0.000    -.8590283   -.5364611
        187  |  -.2389896    .079297    -3.01   0.003    -.3944258   -.0835534
        188  |   .1014157   .0830443     1.22   0.222    -.0613658    .2641973
        190  |   -.009358   .0854821    -0.11   0.913     -.176918    .1582021
        196  |   .0327937   .0872625     0.38   0.707    -.1382563    .2038438
        197  |   .1392845    .068893     2.02   0.043      .004242    .2743271
        198  |    .028596   .0857524     0.33   0.739    -.1394939    .1966858
        199  |  -.1462618    .084149    -1.74   0.082    -.3112087    .0186851
        200  |  -.9810798   .0868557   -11.30   0.000    -1.151332   -.8108272
        203  |   .1467299   .0809639     1.81   0.070    -.0119738    .3054336
        204  |   .0114494   .0876671     0.13   0.896    -.1603936    .1832924
        205  |   .0883486   .0908255     0.97   0.331    -.0896854    .2663827
        206  |  -.3958265   .0863268    -4.59   0.000    -.5650423   -.2266107
        208  |  -.7276795   .0890049    -8.18   0.000     -.902145    -.553214
        209  |  -.0359586   .0879547    -0.41   0.683    -.2083654    .1364483
        210  |  -.4806018   .0913496    -5.26   0.000    -.6596633   -.3015403
        212  |  -.2602319   .0833553    -3.12   0.002    -.4236231   -.0968407
        213  |   .1218164   .0880063     1.38   0.166    -.0506915    .2943244
        214  |    .071646   .0821667     0.87   0.383    -.0894152    .2327073
        215  |  -1.249803   .0947177   -13.20   0.000    -1.435466   -1.064139
        216  |   .0335911   .0936892     0.36   0.720    -.1500564    .2172386
        217  |   .0226487   .0710979     0.32   0.750    -.1167158    .1620133
        218  |   .0682838   .0810185     0.84   0.399    -.0905268    .2270943
        219  |  -.4508056   .0863349    -5.22   0.000    -.6200373   -.2815739
        220  |  -.2613054   .0958704    -2.73   0.006    -.4492285   -.0733824
        221  |  -.1302164   .0893803    -1.46   0.145    -.3054176    .0449847
        222  |  -.0890716   .0713835    -1.25   0.212    -.2289959    .0508526
        224  |  -1.098046   .0805504   -13.63   0.000    -1.255939   -.9401531
        225  |  -.3220305   .2835964    -1.14   0.256    -.8779297    .2338686
        226  |  -.8938272    .092912    -9.62   0.000    -1.075951   -.7117032
        227  |  -.3670639   .2817809    -1.30   0.193    -.9194044    .1852766
        228  |  -.0859144      .1199    -0.72   0.474    -.3209396    .1491108
        229  |  -.3894846   .0890968    -4.37   0.000    -.5641302    -.214839
        230  |  -.3204483   .1690577    -1.90   0.058    -.6518313    .0109348
        231  |  -.5254685    .107486    -4.89   0.000    -.7361601   -.3147769
        232  |  -.3701557   .0982227    -3.77   0.000    -.5626896   -.1776218
        234  |  -.4991051   .1021657    -4.89   0.000     -.699368   -.2988421
        236  |  -.2516413   .1178483    -2.14   0.033    -.4826449   -.0206378
        237  |  -.1934501   .0807478    -2.40   0.017    -.3517302     -.03517
        238  |  -1.354997   .0900497   -15.05   0.000     -1.53151   -1.178484
        239  |  -1.028655   .0730955   -14.07   0.000    -1.171935    -.885375
        240  |  -1.201786   .0809026   -14.85   0.000     -1.36037   -1.043203
        241  |  -.8484198   .0935296    -9.07   0.000    -1.031754   -.6650852
        242  |  -.0792427   .0865659    -0.92   0.360    -.2489273    .0904418
        243  |   .0712452   .0737245     0.97   0.334     -.073268    .2157583
        244  |  -.5095188   .0954923    -5.34   0.000    -.6967007    -.322337
        245  |  -.7135828   .1213605    -5.88   0.000    -.9514708   -.4756947
        246  |   .3300892   .1688882     1.95   0.051    -.0009617      .66114
        247  |  -.3827718   .0834024    -4.59   0.000    -.5462552   -.2192884
        248  |  -.2643056   .1359784    -1.94   0.052    -.5308474    .0022362
        263  |  -.3295475    .088641    -3.72   0.000    -.5032995   -.1557955
        264  |  -.1725127   .0749869    -2.30   0.021    -.3195003   -.0255251
        266  |  -.6340263   .2806611    -2.26   0.024    -1.184172   -.0838808
        268  |  -.2531659    .069129    -3.66   0.000    -.3886709   -.1176609
        269  |  -.0426305   .0637685    -0.67   0.504    -.1676281    .0823671
        270  |  -.1444571   .0791762    -1.82   0.068    -.2996566    .0107423
        273  |  -.9651939   .0769404   -12.54   0.000    -1.116011    -.814377
        276  |  -.3969255    .079322    -5.00   0.000    -.5524106   -.2414404
        277  |   .0639519   .0871252     0.73   0.463     -.106829    .2347328
        278  |  -.7175759   .0974961    -7.36   0.000    -.9086856   -.5264663
        280  |  -.5278039   .1095019    -4.82   0.000    -.7424471   -.3131607
        282  |  -.4752272   .1180992    -4.02   0.000    -.7067226   -.2437318
        284  |    .082129   .0655494     1.25   0.210    -.0463595    .2106174
        285  |   .1275648     .06726     1.90   0.058    -.0042768    .2594064
        286  |   .0715717     .07605     0.94   0.347    -.0774998    .2206431
        288  |  -.2353085   .0655787    -3.59   0.000    -.3638543   -.1067627
        290  |  -.3859265   .1357161    -2.84   0.004     -.651954   -.1198989
        291  |  -.0732242   .0895184    -0.82   0.413    -.2486962    .1022479
        292  |  -.1823957    .096053    -1.90   0.058    -.3706765    .0058851
        293  |  -.1425885   .0948523    -1.50   0.133    -.3285158    .0433388
        294  |   .0614877    .075923     0.81   0.418    -.0873348    .2103102
        295  |  -.1747604   .0798973    -2.19   0.029    -.3313732   -.0181476
        297  |   -.804566   .0755326   -10.65   0.000    -.9526234   -.6565086
        298  |   -1.12679   .0854535   -13.19   0.000    -1.294294   -.9592857
        300  |  -1.327863   .0879051   -15.11   0.000    -1.500173   -1.155554
        303  |  -1.226035   .0985639   -12.44   0.000    -1.419237   -1.032832
        306  |   -.077876   .0870375    -0.89   0.371    -.2484849    .0927329
        307  |  -.5894446   .0914013    -6.45   0.000    -.7686074   -.4102817
        308  |   -.160506   .0983247    -1.63   0.103    -.3532398    .0322278
        309  |   -.228446   .1489913    -1.53   0.125    -.5204955    .0636034
        310  |  -.7312798   .1415538    -5.17   0.000     -1.00875   -.4538092
        311  |  -.9915327   .1327347    -7.47   0.000    -1.251716    -.731349
        313  |  -.5172579   .1762248    -2.94   0.003    -.8626897   -.1718261
        314  |   .0136713   .0825526     0.17   0.868    -.1481464     .175489
        315  |  -.6673805   .1002433    -6.66   0.000    -.8638751   -.4708858
        316  |  -.1325761   .1685993    -0.79   0.432    -.4630606    .1979085
        317  |  -.6497566   .1306428    -4.97   0.000    -.9058396   -.3936735
        400  |  -.5387241   .1523917    -3.54   0.000    -.8374388   -.2400094
        401  |  -.3333998   .1065439    -3.13   0.002    -.5422447   -.1245549
        402  |  -.2499942   .0896462    -2.79   0.005    -.4257167   -.0742716
        404  |  -.5750659   .1303514    -4.41   0.000    -.8305778   -.3195541
        405  |   .0125659   .1246822     0.10   0.920    -.2318333     .256965
        406  |  -.8516126   .1380906    -6.17   0.000    -1.122295   -.5809306
        407  |   .2312909   .1184469     1.95   0.051    -.0008861    .4634679
        408  |   .0863082   .1309393     0.66   0.510     -.170356    .3429723
        409  |  -.2832438   .1223016    -2.32   0.021    -.5229768   -.0435109
        410  |  -.1897057   .0919385    -2.06   0.039    -.3699214     -.00949
        411  |  -.6467766   .1315106    -4.92   0.000    -.9045608   -.3889925
        412  |   -.654604   .1007565    -6.50   0.000    -.8521046   -.4571033
        413  |  -1.734873   .1091291   -15.90   0.000    -1.948785    -1.52096
        416  |     -.3574    .282404    -1.27   0.206    -.9109619    .1961618
        417  |   .0330584   .0918755     0.36   0.719    -.1470339    .2131507
        418  |  -1.098713   .1108381    -9.91   0.000    -1.315975   -.8814505
        419  |  -.6583718    .112134    -5.87   0.000    -.8781743   -.4385692
        422  |   .2379593   .1371985     1.73   0.083     -.030974    .5068926
        423  |   .2443203   .1077844     2.27   0.023     .0330437    .4555969
        429  |  -.8435233   .0928473    -9.09   0.000     -1.02552   -.6615262
        430  |  -.6348282   .1163725    -5.46   0.000    -.8629389   -.4067174
        431  |  -.2110972   .1286272    -1.64   0.101    -.4632292    .0410348
        432  |  -1.369892     .13878    -9.87   0.000    -1.641925   -1.097858
        434  |   .1483802   .1045742     1.42   0.156    -.0566038    .3533642
        435  |   .1932461   .1128857     1.71   0.087    -.0280299    .4145222
        437  |  -1.203374   .2037729    -5.91   0.000    -1.602805   -.8039429
        439  |  -1.107105   .1493185    -7.41   0.000    -1.399796   -.8144143
        440  |  -1.139377   .1542225    -7.39   0.000     -1.44168   -.8370732
        441  |  -.3713396   .3942542    -0.94   0.346    -1.144148    .4014686
        443  |  -1.852679   .3976268    -4.66   0.000    -2.632098    -1.07326
        447  |   .0519705   .1327072     0.39   0.695    -.2081592    .3121001
        452  |  -.8943439   .1283447    -6.97   0.000    -1.145922   -.6427655
        453  |  -.4706596   .1487997    -3.16   0.002    -.7623334   -.1789858
        455  |  -.4388619   .0979696    -4.48   0.000    -.6308997    -.246824
        456  |   .3832413   .2358185     1.63   0.104    -.0790047    .8454873
        458  |   .2813016   .2043688     1.38   0.169    -.1192974    .6819006
        460  |  -.1990084   .1095062    -1.82   0.069    -.4136599    .0156431
        464  |  -.1694037   .1009522    -1.68   0.093     -.367288    .0284805
        465  |  -.0127605   .1634682    -0.08   0.938    -.3331872    .3076662
        466  |   .8369325   .2339855     3.58   0.000     .3782796    1.295586
        468  |   .2993093   .3932781     0.76   0.447    -.4715855    1.070204
        469  |   .4016609   .1829435     2.20   0.028     .0430593    .7602626
        478  |  -1.466312   .1369643   -10.71   0.000    -1.734787   -1.197838
        481  |  -1.399766   .2317459    -6.04   0.000    -1.854029   -.9455028
        483  |  -.7409585   .3942584    -1.88   0.060    -1.513775     .031858
        484  |  -.6318877   .1680671    -3.76   0.000     -.961329   -.3024464
        485  |  -1.904606   .2845943    -6.69   0.000    -2.462461    -1.34675
        486  |  -1.991765   .3965593    -5.02   0.000    -2.769091   -1.214438
        487  |  -.3541653   .1373473    -2.58   0.010    -.6233904   -.0849403
        488  |  -.4819383   .1055465    -4.57   0.000    -.6888281   -.2750485
        490  |   .2464902   .0889779     2.77   0.006     .0720777    .4209028
        491  |  -.7125527   .1058544    -6.73   0.000    -.9200461   -.5050592
        495  |  -.2857029   .0857406    -3.33   0.001    -.4537696   -.1176362
        496  |   .2666235   .3931139     0.68   0.498    -.5039495    1.037197
        497  |   .2078638   .1316465     1.58   0.114    -.0501866    .4659143
        499  |    .080126   .1069053     0.75   0.454    -.1294274    .2896794
        500  |   .2272697   .2022232     1.12   0.261    -.1691236     .623663
        501  |  -.2356234    .394526    -0.60   0.550    -1.008964    .5377175
        502  |  -.3069493   .2832053    -1.08   0.278    -.8620819    .2481832
        503  |  -.2456096   .1039534    -2.36   0.018    -.4493767   -.0418426
        504  |  -.8432005    .395815    -2.13   0.033    -1.619068   -.0673328
        505  |  -.8465642   .1211363    -6.99   0.000    -1.084013   -.6091157
        507  |  -.0378971   .1410025    -0.27   0.788     -.314287    .2384929
        509  |   .0615678   .1851667     0.33   0.740    -.3013919    .4245274
        514  |  -1.453303     .39507    -3.68   0.000     -2.22771   -.6788956
        520  |  -.9788757   .3932254    -2.49   0.013    -1.749667   -.2080842
        521  |   .0882352   .0855512     1.03   0.302    -.0794603    .2559307
        522  |  -.4431153    .202831    -2.18   0.029       -.8407   -.0455305
        523  |   -.487673    .394929    -1.23   0.217    -1.261804    .2864578
        524  |  -.3011146    .094024    -3.20   0.001    -.4854184   -.1168109
        525  |  -.4937224   .1191721    -4.14   0.000    -.7273209   -.2601239
        526  |  -.8358831   .0993192    -8.42   0.000    -1.030566   -.6411998
        527  |  -.7423597   .1579394    -4.70   0.000    -1.051949   -.4327704
        528  |   -.525098   .1365898    -3.84   0.000    -.7928382   -.2573578
        529  |  -.0734675   .2814832    -0.26   0.794    -.6252245    .4782896
        530  |    .167359   .3970672     0.42   0.673    -.6109631    .9456811
        535  |  -.7193866   .1140139    -6.31   0.000    -.9428741   -.4958991
        536  |  -.4383431   .1140106    -3.84   0.000    -.6618242    -.214862
        537  |  -.4385116   .1178578    -3.72   0.000    -.6695338   -.2074895
        540  |   .3303516   .1573137     2.10   0.036     .0219888    .6387144
        541  |  -.7497324   .1053583    -7.12   0.000    -.9562534   -.5432113
        544  |  -1.220676   .1565301    -7.80   0.000    -1.527503   -.9138494
        800  |  -.9569462   .1015036    -9.43   0.000    -1.155911   -.7579811
        801  |  -.5252706   .1145485    -4.59   0.000     -.749806   -.3007351
        803  |  -.2983036   .1832223    -1.63   0.104    -.6574518    .0608446
        804  |  -.0103917   .0966397    -0.11   0.914    -.1998226    .1790392
        805  |  -1.531472   .1114683   -13.74   0.000    -1.749969   -1.312974
        808  |  -.4637368   .1008276    -4.60   0.000    -.6613769   -.2660968
        809  |  -.4335673   .0996441    -4.35   0.000    -.6288873   -.2382473
        817  |  -.4128906   .1491335    -2.77   0.006    -.7052187   -.1205626
        818  |  -.2281391   .0927899    -2.46   0.014    -.4100238   -.0462545
        823  |  -.1456083   .0909968    -1.60   0.110    -.3239783    .0327616
        839  |  -.3677436   .1832114    -2.01   0.045    -.7268705   -.0086167
        850  |  -.1448238   .1048729    -1.38   0.167    -.3503933    .0607457
        851  |  -.2476141   .1044321    -2.37   0.018    -.4523196   -.0429086
        852  |   -.099292   .0971885    -1.02   0.307    -.2897986    .0912147
        853  |   -.700885   .0961782    -7.29   0.000    -.8894113   -.5123587
        870  |  -.3766883   .1111795    -3.39   0.001    -.5946199   -.1587567
        871  |  -.5995421    .117418    -5.11   0.000    -.8297023   -.3693819
        875  |  -.1408812    .102518    -1.37   0.169    -.3418345    .0600722
        876  |    .078361   .1060912     0.74   0.460    -.1295965    .2863186
        880  |   .0910348   .1155893     0.79   0.431    -.1355407    .3176102
        882  |   .0756032   .1038265     0.73   0.467    -.1279152    .2791216
        884  |   -.802758   .1372116    -5.85   0.000    -1.071717    -.533799
        893  |  -.1498426   .1032038    -1.45   0.147    -.3521404    .0524553
        900  |   -1.32839   .1424304    -9.33   0.000    -1.607578   -1.049201
        901  |  -.3168813   .1351955    -2.34   0.019    -.5818884   -.0518742
        903  |  -.2224507   .1358204    -1.64   0.101    -.4886828    .0437814
        904  |  -.5045294   .1353263    -3.73   0.000    -.7697929   -.2392659
        908  |  -.4413739    .115643    -3.82   0.000    -.6680547   -.2146931
        909  |  -.0071544   .1513942    -0.05   0.962    -.3039139    .2896052
        910  |  -.0511531   .1153398    -0.44   0.657    -.2772397    .1749334
        914  |   .0322728   .1517017     0.21   0.832    -.2650894    .3296349
        918  |  -.4345218   .3931009    -1.11   0.269    -1.205069    .3360256
        919  |  -1.319169   .1397537    -9.44   0.000    -1.593111   -1.045227
        920  |  -.1710054   .1214142    -1.41   0.159    -.4089987     .066988
        921  |  -.5587975   .1228495    -4.55   0.000    -.7996042   -.3179907
        924  |  -1.046678   .1173206    -8.92   0.000    -1.276647   -.8167086
        926  |  -1.147626   .1873775    -6.12   0.000    -1.514919   -.7803325
        930  |  -1.469696   .1861202    -7.90   0.000    -1.834524   -1.104867
        932  |   .0130756   .1543305     0.08   0.932    -.2894395    .3155907
        933  |  -1.667382    .150743   -11.06   0.000    -1.962865   -1.371899
        934  |  -.3355182   .1847372    -1.82   0.069    -.6976359    .0265995
        935  |  -.0517244   .1867947    -0.28   0.782    -.4178752    .3144264
        936  |   .0435664   .1850134     0.24   0.814    -.3190928    .4062255
        939  |  -.0350887   .1565121    -0.22   0.823    -.3418801    .2717028
        943  |  -.8554447   .2315599    -3.69   0.000    -1.309343   -.4015462
        947  |  -.2443407   .1548639    -1.58   0.115    -.5479013    .0592199
        948  |  -.0748895   .2095831    -0.36   0.721    -.4857096    .3359306
        951  |    .179756   .1837305     0.98   0.328    -.1803884    .5399004
        952  |  -1.257064   .1365576    -9.21   0.000    -1.524741   -.9893865
        953  |  -.2032186   .1356625    -1.50   0.134    -.4691412    .0627039
        955  |  -1.262058   .1872326    -6.74   0.000    -1.629067   -.8950495
        962  |  -.1290999    .206317    -0.63   0.532    -.5335178    .2753181
        977  |  -1.305681    .184282    -7.09   0.000    -1.666906   -.9444556
        978  |   .0200823   .1859397     0.11   0.914    -.3443925    .3845571
        979  |  -.0412732   .1849116    -0.22   0.823    -.4037328    .3211863
        980  |  -.0286733   .1835968    -0.16   0.876    -.3885556    .3312091
             |
       _cons |   .3057845   2.395534     0.13   0.898    -4.389887    5.001457
------------------------------------------------------------------------------
(est1 stored)

. reghdfe ln_dmshare price ln_mshare_s horsepower fuel width height domestic, absorb(co yearcountry)
(dropped 15 singleton observations)
(MWFE estimator converged in 11 iterations)

HDFE Linear regression                            Number of obs   =     11,468
Absorbing 2 HDFE groups                           F(   7,  10976) =   12308.81
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.9433
                                                  Adj R-squared   =     0.9407
                                                  Within R-sq.    =     0.8870
                                                  Root MSE        =     0.3655

------------------------------------------------------------------------------
  ln_dmshare | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       price |   -.047501   .0014881   -31.92   0.000    -.0504179    -.044584
 ln_mshare_s |   .8725743   .0041114   212.23   0.000     .8645151    .8806334
  horsepower |   .0034713   .0006206     5.59   0.000     .0022548    .0046878
        fuel |  -.0167248   .0057653    -2.90   0.004    -.0280259   -.0054237
       width |   .0126656   .0017102     7.41   0.000     .0093133    .0160178
      height |   .0029992   .0022563     1.33   0.184    -.0014237     .007422
    domestic |   .3801926    .012121    31.37   0.000     .3564333     .403952
       _cons |  -5.845582   .4167739   -14.03   0.000    -6.662534    -5.02863
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          co |       336           0         336     |
 yearcountry |       150           1         149     |
-----------------------------------------------------+

. 
. 
. * Extract the alpha and the sigma 
. gen alpha_OLS2=-_b[price]

. gen sigma_OLS2=_b[ln_mshare_s]

. ge e_jj_OLS2=-alpha_OLS2*(1/(1-sigma_OLS2)-(sigma_OLS2/(1-sigma_OLS2))*mshare_s-mshare)*price

. sum e_jj_OLS2

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
   e_jj_OLS2 |     11,483   -6.456523    3.117557  -55.13705  -1.774851

. 
. * Output for LaTeX
. #delimit ;
delimiter now ;
. esttab using "output/NestedLogit.tex", 
>   se(3) /// SE with 3 Decimal Places
>   b(3) /// Coefficients with 3 Decimal Places
>   label
>   replace /// Replace File
>   title(Nested Logit \label{tab4}) /// Title of Tabel
>   mtitles() /// Column Titles
>   keep(price ln_mshare_s horsepower fuel width height domestic year _cons) /// Don't want all Control Coefficients
>   coeflabels(price "Price (in 1000 EUR)" horsepower "Horsepower (kW)" fuel "Fuel efficiency" width "Width (cm)" height "Height (cm)" domestic "1 if produced domestically" year "Year") /// Label Variables
> ;
(tabulating estimates stored by eststo; specify "." to tabulate the active results)
(output written to output/NestedLogit.tex)

. #delimit cr;
delimiter now cr
. 
. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 6) Firm Averages: Marginal cost, Price & Lerner index
. 
. * Marginal Cost: Logit
. gen MC_logit=price-1/(alpha_OLS1*(1-mshare))

. bysort firm: summarize MC_logit if year==1998

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = AlfaRomeo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = BMW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         35   -77.90554    8.139157  -87.51128  -58.72339

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Fiat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         53   -82.86405    7.131342   -91.8278  -62.58037

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Ford

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         22   -83.75323    5.992289  -89.44952  -65.31228

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Honda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         11   -77.96995    12.24105  -87.84612  -43.03919

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Hyundai

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         18    -85.1022    4.597286  -90.26694  -75.35329

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DeTomaso

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Kia

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         12    -87.1803    3.352633  -91.57208  -82.75714

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mazda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         21   -83.37564    4.807552  -89.53059  -71.13906

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mercedes

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         15   -72.57872    9.199496   -89.3756  -56.86046

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mitsubishi

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         14   -82.07773    4.991633  -89.26601  -69.84496

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Nissan

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         19   -82.65223    6.214978  -89.84403  -66.23907

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = GM

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         32   -77.18943    7.857086  -89.35858  -62.48519

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = PSA

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         39   -81.95992    6.700851  -90.03642  -61.28238

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Renault

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         23   -82.81676    6.566855  -89.67291   -66.7887

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Rover

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Saab

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Seat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Suzuki

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         15   -88.71964    2.332781  -91.73132  -82.52547

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Toyota

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         25   -83.50007    6.518896  -91.13885  -65.67869

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = VW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         63   -79.18911    12.33337  -90.32024  -35.06825

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Volvo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         11   -74.91611    3.866837  -80.25912  -67.31987

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Daewoo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |         21   -84.15057    4.962997  -91.03739  -75.71693

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DAF

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotSimcaHillmanSunbeam

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotMatra

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    MC_logit |          0


. 
. * Marginal Cost: Nested Logit
. gen MC_logit_n=price-(((1-sigma_OLS2)/alpha_OLS2)/(1-sigma_OLS2*mshare_s-(1-sigma_OLS2)*mshare))

. bysort firm: summarize MC_logit_n if year==1998

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = AlfaRomeo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = BMW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         35    17.21856    7.987576   7.813478   35.89786

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Fiat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         53    12.45379    7.023789   3.552474   32.70885

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Ford

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         22     11.6602    5.943409   5.916586   29.95203

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Honda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         11    17.33131    12.22259   7.540128   52.25206

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Hyundai

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         18    10.21343    4.589025   5.046152   19.95105

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DeTomaso

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Kia

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         12     8.12582    3.351614   3.736475   12.54415

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mazda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         21    11.94345    4.804785   5.787539   24.16508

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mercedes

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         15    22.20996    8.917905   5.935956   37.92521

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mitsubishi

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         14    13.24264    4.985301   6.066639   25.46264

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Nissan

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         19    12.68306    6.184607    5.50461   29.04324

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = GM

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         32    18.15059     7.72974   6.116602   32.62173

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = PSA

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         39    13.39798    6.650724   5.379829   34.01589

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Renault

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         23    12.56021    6.453386   5.699314   28.50383

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Rover

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Saab

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Seat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Suzuki

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         15    6.591347    2.331957    3.57222   12.78331

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Toyota

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         25    11.82858    6.511193   4.170062   29.61068

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = VW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         63    16.14923    12.28141   5.013011   60.20661

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Volvo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         11    20.34123    3.794238   15.16649   27.82072

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Daewoo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |         21    11.15756    4.946651   4.274073    19.5255

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DAF

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotSimcaHillmanSunbeam

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotMatra

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |          0


. 
. * Average price
. bysort firm: summarize price if year==1998

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = AlfaRomeo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = BMW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         35    20.19428    8.158309   10.52974   39.38367

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Fiat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         53     15.2772    7.035403   6.256111   35.41222

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Ford

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         22    14.55719    5.956703   8.700132   32.69466

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Honda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         11    20.09446    12.21249   10.30075   54.94833

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Hyundai

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         18      12.915    4.583903   7.744668   22.63935

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DeTomaso

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Kia

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         12    10.81356    3.350995   6.428288   15.22975

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mazda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         21    14.65053    4.806219   8.493602   26.85287

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mercedes

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         15    25.59824    9.211794   8.639425   41.22335

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mitsubishi

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         14    15.95521    4.981673   8.776549   28.16001

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Nissan

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         19     15.4377    6.185533   8.258672   31.75061

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = GM

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         32    21.05448    7.651238   9.086257   35.54293

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = PSA

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         39    16.24319    6.612636   8.258672   36.70483

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Renault

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         23    15.51786     6.41289   8.493602   31.20193

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Rover

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Saab

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Seat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Suzuki

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         15    9.288914    2.335082   6.256111   15.48397

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Toyota

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         25    14.56026     6.51726   6.867504   32.31381

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = VW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         63     18.9903    12.28208   7.742344   62.92334

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Volvo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         11    23.16652      3.8337   18.04568   30.75008

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Daewoo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         21    13.87121    4.953095   6.970175   22.30208

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DAF

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotSimcaHillmanSunbeam

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotMatra

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |          0


. 
. 
. * Lerner Index: Logit
. gen Lerner_logit = (price-MC_logit)/price

. bysort firm: summarize Lerner_logit if year==1998

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = AlfaRomeo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = BMW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         35    5.606362    2.029279    2.49106   9.310865

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Fiat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         53    7.784442     3.35904   2.767197   15.66898

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Ford

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         22    7.688552    2.592215   2.997644    11.2814

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Honda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         11    5.856769    2.069804   1.783267   9.528128

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Hyundai

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         18    8.491284    2.804535    4.32842   12.65537

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DeTomaso

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Kia

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         12    9.947713    3.199426   6.433913   15.24517

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mazda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         21    7.335661    2.171935   3.649217   11.54095

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mercedes

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         15    4.524721    2.297612   2.379327   11.34509

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mitsubishi

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         14    6.676391    1.969572   3.480289   11.17097

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Nissan

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         19    7.240517    2.524234    3.08623   11.87875

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = GM

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         32    5.450415    2.398621    2.75802   10.82277

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = PSA

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         39    7.027797    2.683242     2.6696   11.90205

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Renault

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         23    7.324297    2.647471   3.140531    11.5577

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Rover

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Saab

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Seat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Suzuki

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         15    11.10939    2.485334   6.329736   15.66267

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Toyota

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         25    7.926721    3.026461   3.032527   14.27103

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = VW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         63     6.77862    3.025403   1.557317   12.66575

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Volvo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         11     4.33933    .7109302   3.189258   5.447554

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Daewoo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |         21    8.011743     2.91131   4.395061   14.06099

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DAF

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotSimcaHillmanSunbeam

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotMatra

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_logit |          0


. 
. * Lerner Index: Nested Logit
. gen Lerner_logit_n = (price-MC_logit_n)/price

. bysort firm: summarize Lerner_logit_n if year==1998

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = AlfaRomeo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = BMW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         35    .1661521    .0527349   .0794005   .2579612

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Fiat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         53      .22292    .0955193   .0763399   .4321593

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Ford

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         22    .2257187     .073578   .0838862   .3231938

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Honda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         11    .1649228    .0576765   .0490691   .2680021

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Hyundai

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         18    .2341157    .0774043   .1187448   .3484353

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DeTomaso

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Kia

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         12    .2728584    .0878131   .1763392   .4187449

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mazda

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         21    .2024958    .0595836   .1000931   .3186001

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mercedes

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         15    .1486899    .0554723   .0800065   .3129223

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Mitsubishi

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         14    .1847719    .0545991    .095787   .3087671

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Nissan

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         19    .2031876    .0703463   .0852699   .3334752

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = GM

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         32    .1626566    .0758062   .0821878   .3307151

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = PSA

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         39    .2040205    .0784521   .0732585   .3485842

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Renault

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         23    .2205011    .0810693   .0864724   .3345721

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Rover

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Saab

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Seat

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Suzuki

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         15    .3056883    .0679763   .1744168   .4290031

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Toyota

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         25    .2204195    .0828931   .0836524   .3927835

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = VW

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         63     .194977    .0843784   .0431753   .3525203

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Volvo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         11     .124748    .0193324   .0952635   .1595499

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = Daewoo

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |         21    .2215881    .0798369   .1244986   .3868055

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = DAF

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotSimcaHillmanSunbeam

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-> firm = TalbotMatra

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
Lerner_log~n |          0


. 
. * Output for LaTeX made with ChatGPT
. sum MC_logit_n Lerner_logit_n price

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  MC_logit_n |     11,483    15.60893    8.847463   2.309273   147.6085
Lerner_log~n |     11,483    .1860082    .0762651   .0181367   .5634275
       price |     11,483    18.49683    8.922665   5.260726   150.3351

. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 7) VW/GM Merger simulation using the alpha_OLS2 and sigma_OLS2 values (needs to be entered numerically).
. 
. * STEP 1. initialize
. mergersim init, nests(segment) price(price) quantity(qu) marketsize(msize) firm(firm)
--------------------------------------------------------------------------------
MERGERSIM: Merger Simulation Program
Version 1.0, Revision: 218 
--------------------------------------------------------------------------------
Unit demand one-level nested logit

                  Depvar              Price               Group shares
                  --------------------------------------------------------------
                  M_ls                price               M_lsjg
--------------------------------------------------------------------------------
Variables generated: M_ls M_lsjg
--------------------------------------------------------------------------------

. 
. * STEP 2. premerger investigation (i.co) not needed since already incl in xtset
. xtreg M_ls price M_lsjg horsepower fuel width height domestic year country2-country5, fe

Fixed-effects (within) regression               Number of obs     =     11,483
Group variable: co                              Number of groups  =        351

R-squared:                                      Obs per group:
     Within  = 0.8796                                         min =          1
     Between = 0.7876                                         avg =       32.7
     Overall = 0.8453                                         max =        146

                                                F(12, 11120)      =    6767.52
corr(u_i, Xb) = 0.0199                          Prob > F          =     0.0000

------------------------------------------------------------------------------
        M_ls | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       price |  -.0491036   .0013895   -35.34   0.000    -.0518273   -.0463799
      M_lsjg |   .8677908    .004327   200.55   0.000     .8593091    .8762725
  horsepower |   .0031765   .0006332     5.02   0.000     .0019354    .0044176
        fuel |  -.0255906   .0048552    -5.27   0.000    -.0351077   -.0160735
       width |   .0112444   .0017935     6.27   0.000     .0077288      .01476
      height |   .0012653   .0023704     0.53   0.593    -.0033811    .0059118
    domestic |   .3883771   .0127901    30.37   0.000     .3633063    .4134479
        year |  -.0025221    .001281    -1.97   0.049    -.0050331   -.0000111
    country2 |  -.3304413   .0120622   -27.39   0.000    -.3540853   -.3067972
    country3 |  -.2093509   .0120898   -17.32   0.000    -.2330489   -.1856528
    country4 |  -.4288399   .0126037   -34.02   0.000    -.4535454   -.4041344
    country5 |   -.104273   .0158302    -6.59   0.000     -.135303    -.073243
       _cons |  -.0712422   2.393163    -0.03   0.976    -4.762266    4.619781
-------------+----------------------------------------------------------------
     sigma_u |  .48769407
     sigma_e |  .38909071
         rho |  .61105561   (fraction of variance due to u_i)
------------------------------------------------------------------------------
F test that all u_i=0: F(350, 11120) = 19.01                 Prob > F = 0.0000

. mergersim market if year == 1998 & country==3 
---------------------------------------------------------------------------------
Supply: Bertrand competition
Demand: Unit demand one-level nested logit
--------------------------------------------------------------------------------
Demand estimate
xtreg M_ls price M_lsjg horsepower fuel width height domestic year country2-country5, fe
Dependent variable: M_ls
--------------------------------------------------------------------------------

Parameters

alpha = -0.049
sigma1 = 0.868 
----------------------------------------------------------------
Own- and Cross-Price Elasticities:  unweighted market averages

    Variable |      Mean        SD       Min       Max
-------------+----------------------------------------
       M_ejj |    -5.499     2.337   -16.669    -2.537
       M_ejk |     0.309     0.636     0.003     3.303
       M_ejl |     0.001     0.002     0.000     0.011
------------------------------------------------------
Observations: 97
----------------------------------------------------------------

Pre-merger Market Conditions 
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |              price      Marginal costs   Pre-merger Lerner
---------------------+-----------------------------------------------------------
                 BMW |             17.946              14.529               0.203
                Fiat |             15.338              12.496               0.214
                Ford |             13.093              10.009               0.261
               Honda |             15.778              13.024               0.182
             Hyundai |             12.912              10.201               0.231
                 Kia |             11.276               8.574               0.258
               Mazda |             14.229              11.462               0.206
            Mercedes |             20.114              15.242               0.250
          Mitsubishi |             15.832              13.048               0.185
              Nissan |             15.101              12.346               0.201
                  GM |             19.921              16.809               0.186
                 PSA |             16.397              13.610               0.195
             Renault |             15.292              12.429               0.222
              Suzuki |              9.225               6.501               0.303
              Toyota |             13.019              10.258               0.248
                  VW |             17.182              13.461               0.266
               Volvo |             22.149              19.349               0.129
              Daewoo |             13.483              10.775               0.227
---------------------------------------------------------------------------------
Variables generated: M_costs M_delta 
---------------------------------------------------------------------------------

. 
. * STEP 3. merger simulation: GM (seller=15) and VW (buyer=26) in Germany 1998
. mergersim simulate if year == 1998 & country==3, seller(15) buyer(26) detail

---------------------------------------------------------------------------------
Merger Simulation

                                            Simulation method: Newton
                        Buyer     Seller    Periods/markets: 1
Firm                    26        15        Number of iterations: 6
Marginal cost savings                       Max price change in last it: 4.7e-08  
---------------------------------------------------------------------------------

Prices
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger     Relative change
---------------------+-----------------------------------------------------------
                 BMW |             17.946              18.011               0.003
                Fiat |             15.338              15.355               0.002
                Ford |             13.093              13.143               0.004
               Honda |             15.778              15.790               0.001
             Hyundai |             12.912              12.915               0.000
                 Kia |             11.276              11.277               0.000
               Mazda |             14.229              14.242               0.001
            Mercedes |             20.114              20.127               0.001
          Mitsubishi |             15.832              15.849               0.001
              Nissan |             15.101              15.111               0.001
                  GM |             19.921              20.854               0.059
                 PSA |             16.397              16.411               0.001
             Renault |             15.292              15.313               0.002
              Suzuki |              9.225               9.229               0.000
              Toyota |             13.019              13.029               0.001
                  VW |             17.182              17.749               0.042
               Volvo |             22.149              22.165               0.001
              Daewoo |             13.483              13.486               0.000
---------------------------------------------------------------------------------
Variables generated: M_price2 M_quantity2 M_price_ch (Other M_ variables dropped)
---------------------------------------------------------------------------------

Market shares by quantity
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger          Difference
---------------------+-----------------------------------------------------------
                 BMW |              0.074               0.079               0.005
                Fiat |              0.043               0.048               0.005
                Ford |              0.095               0.108               0.013
               Honda |              0.012               0.014               0.002
             Hyundai |              0.006               0.007               0.001
                 Kia |              0.003               0.004               0.001
               Mazda |              0.025               0.030               0.005
            Mercedes |              0.100               0.106               0.007
          Mitsubishi |              0.015               0.018               0.003
              Nissan |              0.025               0.029               0.004
                  GM |              0.166               0.122              -0.044
                 PSA |              0.034               0.040               0.005
             Renault |              0.051               0.058               0.007
              Suzuki |              0.006               0.007               0.001
              Toyota |              0.027               0.031               0.005
                  VW |              0.300               0.278              -0.022
               Volvo |              0.012               0.014               0.002
              Daewoo |              0.006               0.007               0.001
---------------------------------------------------------------------------------

--------------------------------------------------
                        Pre-merger     Post-merger
--------------------------------------------------
HHS:                     1501           2002
C4:                     66.07          69.31
C8:                     86.21          86.97
--------------------------------------------------
----------------------------------------
                                 Change
----------------------------------------
Consumer surplus:            -1,200,060
Producer surplus:               811,079
----------------------------------------

. 
. * Output for LaTeX made with ChatGPT
. 
.         // GRAPH PRICE EFFECTS
. 
. gen perc_price_ch=M_price_ch*100
(11,386 missing values generated)

. graph bar (mean) perc_price_ch if country==3&year==1998, ///
>         over(firm, sort(perc_price_ch) descending label(angle(vertical))) ///
>         ytitle(Percentage) title(Average percentage price increase per firm) 

. graph export output/a.png, replace      
file output/a.png saved as PNG format

. 
. * ---------------------------------------------------------------------------- *
. 
. * Question 8) Cost efficiencies 
. 
. * Updated STEP 3. with some cost efficiencies. 
. 
. mergersim simulate if year == 1998 & country==3, seller(15) buyer(26) ///
>         sellereff(0.1) buyereff(0.1) method(fixedpoint) maxit(40) dampen(0.5) detail

---------------------------------------------------------------------------------
Merger Simulation

                                            Simulation method: Dampened Fixed point
                        Buyer     Seller    Periods/markets: 1
Firm                    26        15        Number of iterations: 18
Marginal cost savings   .1        .1        Max price change in last it: .        
---------------------------------------------------------------------------------

Prices
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger     Relative change
---------------------+-----------------------------------------------------------
                 BMW |             17.946              17.836              -0.005
                Fiat |             15.338              15.338               0.000
                Ford |             13.093              13.104               0.001
               Honda |             15.778              15.777               0.000
             Hyundai |             12.912              12.912               0.000
                 Kia |             11.276              11.276               0.000
               Mazda |             14.229              14.230               0.000
            Mercedes |             20.114              19.899              -0.008
          Mitsubishi |             15.832              15.832               0.000
              Nissan |             15.101              15.102               0.000
                  GM |             19.921              19.652               0.004
                 PSA |             16.397              16.397               0.000
             Renault |             15.292              15.297               0.000
              Suzuki |              9.225               9.225               0.000
              Toyota |             13.019              13.020               0.000
                  VW |             17.182              16.830              -0.003
               Volvo |             22.149              22.136              -0.001
              Daewoo |             13.483              13.483               0.000
---------------------------------------------------------------------------------
Variables generated: M_price2 M_quantity2 M_price_ch (Other M_ variables dropped)
---------------------------------------------------------------------------------

Market shares by quantity
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger          Difference
---------------------+-----------------------------------------------------------
                 BMW |              0.074               0.068              -0.006
                Fiat |              0.043               0.043               0.000
                Ford |              0.095               0.098               0.002
               Honda |              0.012               0.012               0.000
             Hyundai |              0.006               0.006               0.000
                 Kia |              0.003               0.003               0.000
               Mazda |              0.025               0.026               0.001
            Mercedes |              0.100               0.100               0.001
          Mitsubishi |              0.015               0.016               0.000
              Nissan |              0.025               0.026               0.001
                  GM |              0.166               0.138              -0.029
                 PSA |              0.034               0.035               0.001
             Renault |              0.051               0.052               0.001
              Suzuki |              0.006               0.006               0.000
              Toyota |              0.027               0.028               0.001
                  VW |              0.300               0.325               0.025
               Volvo |              0.012               0.012              -0.001
              Daewoo |              0.006               0.007               0.000
---------------------------------------------------------------------------------

--------------------------------------------------
                        Pre-merger     Post-merger
--------------------------------------------------
HHS:                     1501           2467
C4:                     66.07          72.87
C8:                     86.21          88.68
--------------------------------------------------
----------------------------------------
                                 Change
----------------------------------------
Consumer surplus:                33,892
Producer surplus:             1,707,097
----------------------------------------

.         
. * Output for LaTeX made with ChatGPT
. 
. // EFFICIENCIES
. mergersim mre if year == 1998 & country == 3, seller(15) buyer(26)

------------------------------------------------------
Minimum Required Efficiencies for merging firms

    Variable |      Mean        SD       Min       Max
-------------+----------------------------------------
     M_costs |    14.518     9.670     5.272    42.972
    M_costs2 |    13.387     9.975     4.430    42.923
       M_mre |     0.111     0.063     0.001     0.241
------------------------------------------------------
Weighted average MRE: 0.123    Observations: 19
------------------------------------------------------
Variable generated: M_mre
------------------------------------------------------

. 
.         // GRAPH PRICE EFFECTS
. gen perc_price_chb=M_price_ch*100
(11,386 missing values generated)

. graph bar (mean) perc_price_chb if country==3&year==1998, ///
>         over(firm, sort(perc_price_chb) descending label(angle(vertical))) ///
>         ytitle(Percentage) title(Average percentage price increase per firm)

. graph export output/b.png, replace
file output/b.png saved as PNG format

.         
. * ---------------------------------------------------------------------------- *
. 
. * Question 9) Merger with structural remedy 
. * "Structural remedy" because we can imagine that VW only were alllowed to merge with GM IF they did not buy these 3 Opel models.
. 
. gen new_firm = firm

. 
. * Selling everything of GM to VW except for co = 164, 166 and 168
. replace new_firm = 26 if new_firm == 15 & co != 164 & co != 166 & co != 168
(587 real changes made)

. 
. * Variiable for efficiency where the merged entity here will be #26 and the remaining Opel models will be #15.
. gen efficiency = 0

. replace efficiency = 0.09 if new_firm ==26
(1,867 real changes made)

. replace efficiency = -0.02 if new_firm ==15
(226 real changes made)

. 
. * Merger Simualtion
.  
. mergersim simulate if year == 1998 & country == 3, seller(15) buyer(26)

---------------------------------------------------------------------------------
Merger Simulation

                                            Simulation method: Newton
                        Buyer     Seller    Periods/markets: 1
Firm                    26        15        Number of iterations: 6
Marginal cost savings                       Max price change in last it: 4.7e-08  
---------------------------------------------------------------------------------

Prices
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger     Relative change
---------------------+-----------------------------------------------------------
                 BMW |             17.946              18.011               0.003
                Fiat |             15.338              15.355               0.002
                Ford |             13.093              13.143               0.004
               Honda |             15.778              15.790               0.001
             Hyundai |             12.912              12.915               0.000
                 Kia |             11.276              11.277               0.000
               Mazda |             14.229              14.242               0.001
            Mercedes |             20.114              20.127               0.001
          Mitsubishi |             15.832              15.849               0.001
              Nissan |             15.101              15.111               0.001
                  GM |             19.921              20.854               0.059
                 PSA |             16.397              16.411               0.001
             Renault |             15.292              15.313               0.002
              Suzuki |              9.225               9.229               0.000
              Toyota |             13.019              13.029               0.001
                  VW |             17.182              17.749               0.042
               Volvo |             22.149              22.165               0.001
              Daewoo |             13.483              13.486               0.000
---------------------------------------------------------------------------------
Variables generated: M_price2 M_quantity2 M_price_ch (Other M_ variables dropped)
---------------------------------------------------------------------------------

. 
. mergersim simulate if year == 1998 & country == 3, newfirm(new_firm) efficiencies(efficiency) method(fixedpoint) maxit(40) dampen(0.5) detail

---------------------------------------------------------------------------------
Merger Simulation

                                            Simulation method: Dampened Fixed point
                        Variable name       Periods/markets: 1
Ownership from:         new_firm            Number of iterations: 18
Efficiencies from:      efficiency          Max price change in last it: .        
---------------------------------------------------------------------------------

Prices
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger     Relative change
---------------------+-----------------------------------------------------------
                 BMW |             17.946              17.835              -0.005
                Fiat |             15.338              15.330              -0.001
                Ford |             13.093              13.079              -0.001
               Honda |             15.778              15.777               0.000
             Hyundai |             12.912              12.911              -0.000
                 Kia |             11.276              11.276              -0.000
               Mazda |             14.229              14.224              -0.000
            Mercedes |             20.114              19.931              -0.007
          Mitsubishi |             15.832              15.823              -0.001
              Nissan |             15.101              15.100              -0.000
                  GM |             19.921              19.659               0.000
                 PSA |             16.397              16.390              -0.000
             Renault |             15.292              15.287              -0.000
              Suzuki |              9.225               9.223              -0.000
              Toyota |             13.019              13.016              -0.000
                  VW |             17.182              16.494              -0.032
               Volvo |             22.149              22.131              -0.001
              Daewoo |             13.483              13.483              -0.000
---------------------------------------------------------------------------------
Variables generated: M_price2 M_quantity2 M_price_ch (Other M_ variables dropped)
---------------------------------------------------------------------------------

Market shares by quantity
Unweighted averages by firm

---------------------------------------------------------------------------------
           firm code |         Pre-merger         Post-merger          Difference
---------------------+-----------------------------------------------------------
                 BMW |              0.074               0.068              -0.006
                Fiat |              0.043               0.041              -0.001
                Ford |              0.095               0.093              -0.002
               Honda |              0.012               0.012               0.000
             Hyundai |              0.006               0.006              -0.000
                 Kia |              0.003               0.003              -0.000
               Mazda |              0.025               0.025              -0.000
            Mercedes |              0.100               0.100               0.000
          Mitsubishi |              0.015               0.015              -0.001
              Nissan |              0.025               0.025              -0.001
                  GM |              0.166               0.136              -0.030
                 PSA |              0.034               0.033              -0.001
             Renault |              0.051               0.050              -0.001
              Suzuki |              0.006               0.006              -0.000
              Toyota |              0.027               0.027              -0.000
                  VW |              0.300               0.344               0.044
               Volvo |              0.012               0.011              -0.002
              Daewoo |              0.006               0.006              -0.000
---------------------------------------------------------------------------------

--------------------------------------------------
                        Pre-merger     Post-merger
--------------------------------------------------
HHS:                     1501           1971
C4:                     66.07          67.33
C8:                     86.21          86.57
--------------------------------------------------
----------------------------------------
                                 Change
----------------------------------------
Consumer surplus:               360,103
Producer surplus:             1,001,752
----------------------------------------

. 
.         // GRAPH PRICE EFFECTS
. gen perc_price_chc=M_price_ch*100
(11,386 missing values generated)

. graph bar (mean) perc_price_chc if country==3&year==1998, ///
>         over(firm, sort(perc_price_chc) descending label(angle(vertical))) ///
>         ytitle(Percentage) title(Average percentage price increase per firm)

. graph export output/c.png, replace
file output/c.png saved as PNG format

. log close
      name:  <unnamed>
       log:  C:\Users\chadi\OneDrive - HandelshÃ¶gskolan i Stockholm\SSE\5321\PS2G5\log/ps2.log
  log type:  text
 closed on:  19 May 2024, 11:10:49
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
